// Article data - in a real application, this would come from a database or API
const articlesData = {
    1: {
        title: "يتم الكشف عن خطة تطوير جديدة لميناء بترون التاريخي",
        category: "أخبار محلية",
        time: "منذ ساعتين",
        image: "https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80",
        content: `
            <p>أعلنت البلدية عن خطة شاملة لإعادة تنشيط ميناء بترون التاريخي مع الحفاظ على تراثه الثقافي. يشمل المشروع تحسينات البنية التحتية، مناطق المشاة، ودعم الأعمال المحلية.</p>

            <p>قال رئيس البلدية في مؤتمر صحفي عقد اليوم: "ميناء بترون ليس مجرد مرفق تجاري، بل هو جزء أساسي من هويتنا الثقافية والتاريخية. نهدف إلى تحويله إلى وجهة سياحية جذابة مع الحفاظ على أهميته الاقتصادية."</p>

            <p>المراحل الرئيسية للمشروع تشمل:</p>
            <ul>
                <li>إعادة تأهيل الرصيف الرئيسي وتحسين الإضاءة</li>
                <li>إنشاء مناطق ترفيهية ومطاعم تطل على البحر</li>
                <li>تطوير مرافق الرسو للسياحة البحرية</li>
                <li>إنشاء متحف صغير يروي تاريخ الميناء</li>
                <li>تحسين الوصول للأشخاص ذوي الاحتياجات الخاصة</li>
            </ul>

            <p>من المتوقع أن يبدأ العمل في المشروع خلال الأشهر القليلة القادمة، مع انتهاء المرحلة الأولى بحلول نهاية العام الحالي. التكلفة الإجمالية للمشروع تقدر بحوالي 5 مليون دولار، ممولة جزئياً من خلال منح أوروبية ومساهمات محلية.</p>

            <p>أعرب التجار المحليون عن تفاؤلهم بالمشروع، مؤكدين أنه سيوفر فرص عمل جديدة ويحسن من اقتصاد المنطقة. "هذا المشروع سيعيد إحياء الميناء ويجعله نقطة جذب للسياح من جميع أنحاء المنطقة"، قال أحد أصحاب المطاعم المحلية.</p>

            <p>البلدية تدعو جميع الأطراف المعنية للمشاركة في ورشة عمل ستعقد الأسبوع القادم لمناقشة التفاصيل والحصول على اقتراحات إضافية.</p>
        `
    },
    2: {
        title: "يتكيف المزارعون المحليون مع تحديات المناخ باستخدام تقنيات مبتكرة",
        category: "زراعة",
        time: "منذ 5 ساعات",
        image: "https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
        content: `
            <p>مجتمع بترون الزراعي ينفذ طرق حفظ المياه الجديدة ودورة المحاصيل لمواجهة تغيرات الطقس. يقول الخبراء أن هذه النهج يمكن أن تكون نموذجا للمنطقة.</p>

            <p>مع تغير أنماط الطقس وارتفاع درجات الحرارة، يجد المزارعون في منطقة بترون أنفسهم أمام تحديات غير مسبوقة. ومع ذلك، بدلاً من الاستسلام، يبتكرون حلولاً مبتكرة للحفاظ على إنتاجهم الزراعي.</p>

            <p>أحد أبرز هذه الحلول هو نظام الري بالتنقيط الذكي، الذي يستخدم أجهزة استشعار لقياس رطوبة التربة ودرجة الحرارة. هذا النظام يقلل من استهلاك المياه بنسبة تصل إلى 40% مقارنة بالطرق التقليدية.</p>

            <p>كما أدخل المزارعون تقنية "الزراعة المائية" لإنتاج الخضروات في بيئة محمية، مما يسمح بزراعة المحاصيل على مدار السنة بغض النظر عن الظروف الجوية الخارجية.</p>

            <p>الدكتور أحمد الخليل، خبير زراعي محلي، يوضح: "هذه التقنيات ليست مجرد حلول مؤقتة، بل هي استثمار في المستقبل. نحن نعلم أن تغير المناخ واقع لا مفر منه، لذلك يجب أن نكيف أنفسنا معه."</p>

            <p>البلدية تدعم هذه المبادرات من خلال تقديم منح وتدريبات للمزارعين. كما تم إنشاء مركز تدريبي متخصص في الزراعة المستدامة يقدم دورات مجانية للمزارعين الراغبين في تبني هذه التقنيات.</p>

            <p>النتائج الأولية مشجعة. المزارعون الذين طبقوا هذه الطرق شهدوا زيادة في الإنتاج بنسبة 25% مع انخفاض كبير في التكاليف. كما ساهمت هذه الابتكارات في تحسين جودة المنتجات وتقليل الاعتماد على المبيدات الكيميائية.</p>

            <p>يأمل الخبراء أن يصبح نموذج بترون الزراعي مثالاً يحتذى به في المناطق الأخرى، خاصة مع تزايد الضغط على الموارد المائية في المنطقة.</p>
        `
    },
    3: {
        title: "مهرجان بترون الدولي السنوي يعلن عن تشكيلة 2024",
        category: "ثقافة",
        time: "أمس",
        image: "https://images.unsplash.com/photo-1511578314322-379afb476865?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1169&q=80",
        content: `
            <p>المهرجان الذي ينتظره الجميع بشدة سيقدم فنانين من 12 دولة، مع التركيز على الموسيقى والفنون المتوسطية. يتوقع المنظمون حضوراً قياسياً هذا العام.</p>

            <p>أعلن منظمو مهرجان بترون الدولي عن برنامج هذا العام الذي يعد الأكثر تنوعاً وغنى في تاريخ المهرجان. سيقام المهرجان خلال شهر أغسطس القادم ويستمر لمدة عشرة أيام متتالية.</p>

            <p>من أبرز الفعاليات:</p>
            <ul>
                <li>حفلات موسيقية يومية بمشاركة فنانين من إيطاليا، اليونان، تركيا، ولبنان</li>
                <li>معرض فني تشكيلي يضم أعمال فنانين من 15 دولة متوسطية</li>
                <li>عروض مسرحية تقليدية وحديثة</li>
                <li>ورش عمل في الطبخ المتوسطي والحرف التقليدية</li>
                <li>مسابقات ثقافية للأطفال والشباب</li>
                <li>سوق تقليدي يعرض منتجات الحرفيين المحليين</li>
            </ul>

            <p>النجمة الإيطالية فرانشيسكا بيانكي ستفتتح المهرجان بحفل كبير يجمع بين الموسيقى الكلاسيكية والإلكترونية. كما سيقدم الفنان اليوناني ديميتريس بابادوبولوس عرضاً فريداً يمزج بين الموسيقى التقليدية والمعاصرة.</p>

            <p>من الجانب المحلي، سيكون هناك مشاركة واسعة من الفنانين البترونيين واللبنانيين، مما يعكس التنوع الثقافي الغني للمنطقة.</p>

            <p>قال مدير المهرجان، الأستاذ جورج معلوف: "هذا العام، نركز على تعزيز التبادل الثقافي بين شعوب المتوسط. المهرجان ليس مجرد فعاليات ترفيهية، بل هو فرصة للتعرف على ثقافاتنا المتنوعة وتقوية الروابط بيننا."</p>

            <p>يتوقع المنظمون حضور أكثر من 50 ألف زائر من لبنان والدول المجاورة. تم تعزيز الإجراءات الأمنية واللوجستية لضمان سلامة الجميع وجودة الفعاليات.</p>

            <p>تذاكر المهرجان متوفرة عبر الإنترنت وفي نقاط البيع المعتمدة، مع أسعار متفاوتة تناسب جميع الفئات.</p>
        `
    },
    4: {
        title: "مركز بدء الشركات الجديد يطلق في بترون لدعم رواد الأعمال التكنولوجيين",
        category: "أعمال",
        time: "أمس",
        image: "https://images.unsplash.com/photo-1576671414121-aa0b80a5f2f3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
        content: `
            <p>تم افتتاح مساحة عمل تعاونية وحاضنة أعمال في وسط المدينة، تقدم موارد وإرشاداً للشركات التكنولوجية الناشئة. تهدف المبادرة إلى الاحتفاظ بالمواهب المحلية وجذب الاستثمارات.</p>

            <p>في خطوة تهدف إلى تعزيز الاقتصاد المحلي ودعم الابتكار التكنولوجي، تم افتتاح "مركز بترون للابتكار" في مبنى تاريخي تم ترميمه في قلب المدينة.</p>

            <p>المركز يقدم خدمات متعددة لرواد الأعمال:</p>
            <ul>
                <li>مساحات عمل مشتركة مجهزة بأحدث التقنيات</li>
                <li>برامج تدريبية في ريادة الأعمال والتكنولوجيا</li>
                <li>استشارات قانونية ومالية مجانية</li>
                <li>شبكة من المستثمرين والخبراء</li>
                <li>دعم فني وتقني للمشاريع الناشئة</li>
            </ul>

            <p>المركز هو نتيجة شراكة بين البلدية، غرفة التجارة، والجامعة اللبنانية - فرع الشمال. تم تمويله جزئياً من خلال منح أوروبية وتبرعات محلية.</p>

            <p>السيدة لينا الحاج، مديرة المركز، أكدت: "هدفنا هو خلق بيئة مناسبة للابتكار والنمو. نريد أن نظهر أن بترون ليست فقط مدينة تاريخية، بل هي أيضاً مركز للابتكار والتكنولوجيا."</p>

            <p>خلال حفل الافتتاح، تم الإعلان عن أول دفعة من المشاريع التي ستستفيد من خدمات المركز. تشمل هذه المشاريع تطبيقات الهواتف الذكية، حلول الطاقة المتجددة، والذكاء الاصطناعي للزراعة.</p>

            <p>من المتوقع أن يساهم المركز في خلق مئات فرص العمل الجديدة خلال السنوات القادمة، وجذب استثمارات خارجية إلى المنطقة.</p>

            <p>البلدية تدعو جميع الشباب المهتمين بالتكنولوجيا ورواد الأعمال لزيارة المركز والاستفادة من خدماته. المركز مفتوح يومياً من الساعة 9 صباحاً حتى 6 مساءً.</p>
        `
    }
};

// Function to get URL parameters
function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    const results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}

// Load article content
function loadArticle() {
    const articleId = getUrlParameter('id');

    if (!articleId || !articlesData[articleId]) {
        // If no valid article ID, show default content or redirect
        document.getElementById('article-title-display').textContent = 'المقالة غير موجودة';
        document.getElementById('article-content').innerHTML = '<p>عذراً، المقالة المطلوبة غير متوفرة حالياً.</p>';
        return;
    }

    const article = articlesData[articleId];

    // Update page title
    document.getElementById('article-title').textContent = `Batroun Press - ${article.title}`;

    // Populate article content
    document.getElementById('article-image').src = article.image;
    document.getElementById('article-image').alt = article.title;
    document.getElementById('article-category').textContent = article.category;
    document.getElementById('article-time').innerHTML = `<i class="far fa-clock"></i> ${article.time}`;
    document.getElementById('article-title-display').textContent = article.title;
    document.getElementById('article-content').innerHTML = article.content;
}

// Social sharing functions
function shareOnFacebook() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.getElementById('article-title-display').textContent);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&t=${title}`, '_blank');
}

function shareOnTwitter() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent(document.getElementById('article-title-display').textContent + ' - Batroun Press');
    window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
}

function shareOnWhatsApp() {
    const url = "https://tonyelchediac.github.io/batrounpress/article.html?id=1"; 
    const title = document.getElementById('article-title-display').textContent;
    // نشفّر الرسالة كاملة (العنوان + الرابط الخام)
    const text = encodeURIComponent(title + ' - Batroun Press\n' + url);
    window.open(`https://wa.me/?text=${text}`, '_blank');
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    loadArticle();
});
